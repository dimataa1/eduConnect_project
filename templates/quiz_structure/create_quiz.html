{% extends 'common/base.html' %}

{% block content %}
<h1>Create Quiz</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    
    <!-- Add Question Section -->
    <div id="questions-container">
        <h3>Questions</h3>
        <div class="question-form">
            <!-- Dynamic Question form will be added here -->
        </div>
        <button type="button" id="add-question-btn" class="btn btn-secondary">Add New Question</button>
    </div>
    
    <button type="submit" class="btn btn-primary">Create Quiz</button>
</form>

<script>
    document.getElementById('add-question-btn').addEventListener('click', function() {
        var questionFormHTML = `
            <div class="form-group">
                <label for="question">Question</label>
                <input type="text" name="question" class="form-control" placeholder="Enter question" required>
            </div>
            <div class="form-group">
                <label for="answer">Correct Answer</label>
                <input type="text" name="answer" class="form-control" placeholder="Enter correct answer" required>
            </div>
            <div class="form-group answers-group">
                <label>Possible Answers</label>
                <input type="text" name="answers_0" class="form-control" placeholder="Enter answer" required>
                <input type="text" name="answers_1" class="form-control" placeholder="Enter answer" required>
                <input type="text" name="answers_2" class="form-control" placeholder="Enter answer" required>
                <input type="text" name="answers_3" class="form-control" placeholder="Enter answer" required>
            </div>
            <div class="form-group">
                <label for="correct_answer">Correct Answer</label>
                <select name="correct_answer_0" class="form-control">
                    <option value="0">Answer 1</option>
                    <option value="1">Answer 2</option>
                    <option value="2">Answer 3</option>
                    <option value="3">Answer 4</option>
                </select>
            </div>
            <button type="button" class="btn btn-danger remove-question-btn">Remove Question</button>
            <hr>
        `;
        var container = document.querySelector('#questions-container .question-form');
        container.innerHTML += questionFormHTML;

        container.querySelectorAll('.remove-question-btn').forEach(function(button) {
            button.addEventListener('click', function() {
                button.parentElement.remove();
            });
        });
    });
</script>

{% endblock %}
