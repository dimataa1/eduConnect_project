{% extends 'common/base.html' %}

{% block content %}
<h1 class="text-center my-4">Create a Stunning Quiz</h1>
<div class="container">
    <form method="post" id="quiz-form">
        {% csrf_token %}
        <div class="mb-3">
            <label for="quiz-title" class="form-label">Quiz Title</label>
            <input type="text" name="quiz_title" id="quiz-title" class="form-control" placeholder="Enter quiz title" required>
        </div>

        <div id="questions-container">
            <h3>Questions</h3>
            <!-- Dynamic question blocks will be added here -->
        </div>
        <div class="d-flex justify-content-end">
            <button type="button" id="add-question-btn" class="btn btn-success btn-lg my-3">
                <i class="bi bi-plus-circle"></i> Add New Question
            </button>
        </div>

        <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-primary btn-lg mt-4">
                <i class="bi bi-cloud-upload"></i> Create Quiz
            </button>
        </div>
    </form>
</div>

<script>
    document.getElementById('add-question-btn').addEventListener('click', function() {
        const questionId = Date.now(); // Unique ID for each question block
        const questionFormHTML = `
            <div class="question-block p-3 mb-4 border rounded bg-light">
                <div class="d-flex justify-content-between align-items-center">
                    <h5>Question</h5>
                    <button type="button" class="btn btn-danger btn-sm remove-question-btn">
                        <i class="bi bi-trash"></i> Remove
                    </button>
                </div>
                <div class="form-group mt-3">
                    <label for="question-${questionId}">Question</label>
                    <input type="text" name="questions[]" id="question-${questionId}" class="form-control" placeholder="Enter the question" required>
                </div>
                <div class="form-group mt-3">
                    <label for="answers-${questionId}">Possible Answers</label>
                    <div id="answers-${questionId}" class="d-flex flex-column gap-2">
                        <input type="text" name="answers_${questionId}[]" class="form-control" placeholder="Enter answer 1" required>
                        <input type="text" name="answers_${questionId}[]" class="form-control" placeholder="Enter answer 2" required>
                        <input type="text" name="answers_${questionId}[]" class="form-control" placeholder="Enter answer 3" required>
                        <input type="text" name="answers_${questionId}[]" class="form-control" placeholder="Enter answer 4" required>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="correct-answer-${questionId}">Correct Answer</label>
                    <select name="correct_answers[]" id="correct-answer-${questionId}" class="form-select">
                        <option value="0">Answer 1</option>
                        <option value="1">Answer 2</option>
                        <option value="2">Answer 3</option>
                        <option value="3">Answer 4</option>
                    </select>
                </div>
            </div>
        `;
        const container = document.getElementById('questions-container');
        container.insertAdjacentHTML('beforeend', questionFormHTML);

        // Attach event listener to remove button
        container.querySelectorAll('.remove-question-btn').forEach(button => {
            button.addEventListener('click', function() {
                button.closest('.question-block').remove();
            });
        });
    });
</script>

<style>
    #quiz-form {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .btn {
        transition: all 0.3s ease;
    }
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    .question-block {
        background: linear-gradient(135deg, #f0f9ff, #cbebff);
    }
</style>

{% endblock %}
